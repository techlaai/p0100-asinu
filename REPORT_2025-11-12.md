# Daily Report — 12.11.2025

## Scope
- Supabase/BaaS deprecation follow-up: scrub runtime code, docs, and QA assets to point exclusively to Postgres + Viettel storage stack.

## Worklog
1. Updated product surfaces to reflect Postgres ownership (privacy policy, profile setup notes, AI cache comments).
2. Re-authored `AUTH_TESTING_GUIDE.md`, QA checklists, and deployment docs so all flows rely on `asinu.sid` cookies + native Postgres tooling.
3. Cleaned infrastructure references (Docker summary, Quick Deployment Plan, stability matrix, mission notes) and removed the obsolete `report_artifacts/grep_diabot.txt`.
4. Generalized `scripts/qa_no_bolt.mjs` and stripped Supabase-specific logic from QA scripts/tests to enforce backend-agnostic forbidden terms.
5. Confirmed repository is now free of Supabase strings (`rg -i supabase -n --no-heading` → no matches).
6. Finalized CI workflow consolidation plan: retain four tracks (Core CI, Docker Build & Smoke, Extended QA, Deploy), merge overlapping jobs, retire/disable redundant workflows, and document guardrails (triggers, concurrency, labels, secrets, soft sunsets).
7. Applied the new workflow structure: revamped `Core CI`, `Docker Build & Smoke`, unified `Extended QA`, created the multi-env `Deploy` pipeline, and archived the redundant workflows with `[DEPRECATED]` notices.
8. Ported the required charts from the Cruip Tailwind template (Line, Bar, Donut) into reusable client components under `src/components/charts`, along with shared color/theme utilities and Chart.js configuration.
9. Replaced the legacy Recharts dashboard views with the new Chart.js UI: TrendChart now renders a grid of always-on cards for BG/BP/Weight/Water/Insulin/Meals + donut, and the log timeline stays expanded by default.
10. Verified the consolidated workflows end-to-end—Core CI (lint/type-check/tests/build) and Docker Build & Smoke both passed after pointing health checks to `/api/qa/selftest`, confirming the pipeline is green post refactor.
11. Delivered Family Module Phase A scaffolding: new `relatives` schema + enums, `logged_by` support trên toàn bộ `log_*`, feature-flag docs, và unit tests để đảm bảo `/api/relative/*` im lặng khi OFF.
12. Kicked off Life Tree Sprint 1–2: added `tree_events`/`points_ledger`/`tree_state` migrations + award helper + `/api/tree/state`; wired mission check-ins to award points; shipped `LifeTreeCard` UI (animated level/E_day, fetches API, hides khi flag OFF).
13. Delivered Family Phase B backend: new `familyService`, `/api/relative/list|add|remove`, và `/api/relative/dashboard` enforce owner/relative permissions (flag `RELATIVE_ENABLED` vẫn mặc định OFF).
14. Phase B UI: Profile Viewer có `RelativesPanel` (client fetch list/add/remove, auto-hide khi flag OFF). Life Tree card được nâng cấp với visualization/animation dựa trên `config/tree_scene.json`.

## Pending / Follow-ups
- Re-run QA smoke scripts with the updated env expectations (Postgres/Bridge secrets).
- Communicate to QA/ops teams that Supabase secrets can be rotated out of CI settings.
- Configure the secrets/variables required by Docker Smoke (Postgres + Bridge env) and Deploy (CAMP/PROD hosts, creds, base URLs) before first execution.
- Trigger a manual Extended QA run to validate the combined artifact/report flow ahead of the nightly schedule.
- Run Core CI on an active branch (with and without the `gpt` label) to confirm the gating logic and no-bolt scan operate as expected.
